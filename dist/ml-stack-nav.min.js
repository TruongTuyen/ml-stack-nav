/*!
 * ml-stack-nav - v1.0.0
 * Customizable, accessible, easy-to-use multi-level stack navigation menu with slide effect.
 * https://github.com/damianwajer/ml-stack-nav
 * 
 * Author: Damian Wajer
 * License: MIT
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){"use strict";function b(b,d){var f=a(b);this.config=a.extend({},e,d),this.el={$nav:f,$toggleButton:a(f.attr("data-nav-toggle")||this.config.navToggleSelector),$menuFirstLevel:f.find(".ml-stack-nav__menu").eq(0),$buttonNext:f.find(".js-ml-stack-nav-next"),$buttonBack:f.find(".js-ml-stack-nav-back")},this._defaults=e,this._name=c,this._init()}var c="mlStackNav",d=c,e={navToggleSelector:".ml-stack-nav-toggle",openClass:"is-open",activeClass:"is-active",zIndexValue:900};a.extend(b.prototype,{_init:function(){this._initAttributes(),this._attachEvents()},_initAttributes:function(){this.el.$nav.hasClass("ml-stack-nav")||this.el.$nav.addClass("ml-stack-nav")},_attachEvents:function(){var b=this;b.el.$toggleButton.on("click",function(a){b.toggle(),a.preventDefault()}),b.el.$buttonBack.on("click",function(a){b.moveBack(),a.preventDefault()}),b.el.$buttonNext.on("click",function(c){b._moveNext(a(this).closest(".ml-stack-nav__item").find(".ml-stack-nav__menu").eq(0)),c.preventDefault()}),b.el.$menuFirstLevel.on("webkitTransitionEnd msTransitionEnd oTransitionEnd transitionend",function(a){b.isOpen()||b.el.$nav.css("z-index","-1")})},isOpen:function(){return!!this.el.$nav.hasClass(this.config.openClass)},toggle:function(){this.isOpen()?this.close():this.open()},open:function(){this.el.$nav.trigger(a.Event("show.ml-stack-nav",{relatedTarget:this.el.$toggleButton[0]})),this.el.$toggleButton.addClass(this.config.activeClass),this.el.$nav.addClass(this.config.openClass+" "+this.config.activeClass).css("z-index",this.config.zIndexValue)},_moveNext:function(a){a.closest("."+this.config.activeClass).removeClass(this.config.activeClass),a.closest(".ml-stack-nav__item").addClass(this.config.openClass+" "+this.config.activeClass)},moveBack:function(){return this.el.$nav.hasClass(this.config.activeClass)?void this.close():void this.el.$nav.find("."+this.config.activeClass).removeClass(this.config.activeClass).removeClass(this.config.openClass).closest("."+this.config.openClass).addClass(this.config.activeClass).find("."+this.config.openClass).removeClass(this.config.openClass)},close:function(){this.el.$nav.trigger(a.Event("hide.ml-stack-nav",{relatedTarget:this.el.$toggleButton[0]})),this.el.$toggleButton.removeClass(this.config.activeClass),this.el.$nav.removeClass(this.config.openClass+" "+this.config.activeClass).find("."+this.config.openClass).removeClass(this.config.openClass),this.el.$nav.find("."+this.config.activeClass).removeClass(this.config.activeClass)}}),a.fn[c]=function(c){return this.each(function(){a.data(this,d)?"string"==typeof c&&"_"!==c.charAt(0)&&a.isFunction(b.prototype[c])&&a.data(this,d)[c]():a.data(this,d,new b(this,c))})}});